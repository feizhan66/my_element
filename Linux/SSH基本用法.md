# SSH基本用法

## 连接主机
最简单的 SSH 命令只需要指定用户名和主机名参数即可. 主机名可以是 IP 地址或者域名. 命令格式如下:
```
ssh root@hostname

ssh root@127.0.0.1
```

## 更换端口连接主机
SSH 默认连接到目标主机的 22 端口上,但是由于各种原因你可能需要连接到其他端口(-p 指定端口)
```
ssh -p 10022 root@hostname
```

## 远程执行命令
有时在远程主机执行一条命令并显示到本地, 然后继续本地工作是很方便的. SSH 就能满足这个需求:
```
ssh root@hostname ls -l
```

## 挂载文件系统
另外一个很赞的基于 SSH 的工具叫 sshfs. sshfs 可以让你在本地直接挂载远程主机的文件系统.
```
sshfs -o idmap=user pi@10.42.0.47:/home/pi ~/Pi

// 该命令就将远程主机 pi 用户的主目录挂载到本地主目录下的 Pi 文件夹.
```

## 图形化界面
假如现在你想要在远程主机运行一个图形界面的程序, SSH 已经帮你想到了! 用前面提到的 SSH 基本命令加上参数 -X 连接到远程主机即可开启 X11 转发功能. 登录后你可能觉得没什么差别, 但是当你运行一个图形界面程序后就会发现其中的不同的.
```
ssh -X pi@10.42.0.47

pistore
```

如果你想在运行图形界面程序的同时做些别的事情, 只需要简单地在命令末尾加一个 & 符号.
```
pistore&
```

## 转义字符
SSH 提供了多样的转义字符功能. 用 SSH 连接到任意一台远程主机然后输入 ~? 你就可以看到支持的转义字符和功能说明列表

## 配置SSH
如果你需要改变 SSH 的配置, 请用你喜好的文本编辑器打开 /etc/ssh/sshd_config 进行编辑. 比如你想改变登陆的标语, 在配置文件中找到下面这行:
```
Banner none
```
删除 # 字符(取消该行的注释), 将 none 替换为包含你期望显示内容的文件地址. 修改后该行应该类似这样:
```
Banner /etc/issue
```
在配置文件 /etc/ssh/sshd_config 中你还可以找到端口号, 空闲超时时间等配置项. 配置项大都比较容易理解, 但是保险起见在你修改一些不是很确定的配置项时最好参考下 SSH 的帮助文档.


## 构建 ssh 密钥对
```
ssh-keygen -t dsa
```











